{% extends "layout/public.njk" %}
{% from "govuk/components/error-summary/macro.njk" import govukErrorSummary %}
{% from "govuk/components/radios/macro.njk" import govukRadios %}

{% set mainClasses = "app-container govuk-body" %}

{% block content %}
  {% if errorList %}
    {{ govukErrorSummary({
      titleText: "There is a problem",
      errorList: errorList
    }) }}
  {% endif %}

  <h1 class="govuk-heading-xl">Cookies</h1>

  <p class="govuk-body">Cookies are files saved on your phone, tablet or computer when you visit a website.</p>
  <p class="govuk-body">We use cookies to store information about how you use the 'Claim criminal injuries compensation'
    service, such as the pages you visit.</p>

  <form id="cookie-preferences" method="post">
    <input type="hidden" name="_csrf" value="{{ csrfToken }}">

    <div class="govuk-form-group">
      <fieldset class="govuk-fieldset">
        <legend class="govuk-fieldset__legend govuk-fieldset__legend--l">
          <p class="govuk-fieldset__heading govuk-!-margin-top-5">
            Cookies used to improve the service
          </p>
        </legend>
        {{ govukRadios({
          idPrefix: "cookiePreferenceAnalytics",
          name: "cookiePreferenceAnalytics",
          hint: {
            html:
            "<p>We use Google Analytics to measure how you use the website so we can improve it. We do not allow Google to use or share the data about how you use this site.</p>
            <p>Google Analytics sets cookies that store anonymised information about:</p>
            <ul>
              <li>how you got to the site</li>
              <li>the pages you visit on the site</li>
              <li>how long you spend on each page</li>
              <li>what you click on while you're visiting the site</li>
            </ul>"
          },
          items: [
            {
              value: 'accepted',
              checked: cookieAccepted === 'accepted',
              text: "Use cookies that measure my website use",
              attributes: {
                'data-cookie-preference': 'analytics'
              }
            },
            {
              value: 'rejected',
              text: "Do not use cookies that measure my website use",
              checked: cookieAccepted === 'rejected',
              attributes: {
                'data-cookie-preference': 'analytics'
              }
            }
          ],
          errorMessage: errorList and (errorList | selectattr("href", "equalto", "#cookiePreferenceAnalytics") | first),
          classes: "govuk-radios--inline"
        }) }}
      </fieldset>
    </div>
    <input type="submit" class="govuk-button" id="save-preferences" value="Save changes" />
  </form>

  <h2 class="govuk-heading-l govuk-!-margin-top-5">Essential cookies</h2>
  <p class="govuk-body">These cookies need to be on to allow you to use the 'Claim criminal injuries compensation' service.</p>

  <h3 class="govuk-heading-m">Your progress when using the service</h3>
  <p class="govuk-body">When you use the service, we'll set a cookie to remember your progress through this site. This cookie does not store your personal data and is deleted when you close this website.</p>

  <h3 class="govuk-heading-m">Your cookie preferences</h3>
  <p class="govuk-body">When you use the service, we'll set a cookie to remember your cookie preferences. This cookie does not store any personal data.</p>
  <p class="govuk-body">It will be saved on your computer or phone for 1 year, or until you delete it.</p>

{% endblock %}
